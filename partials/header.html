<!-- Header with improved mobile design -->
<header id="header" class="fixed w-full bg-[var(--color-bg)] border-b border-[var(--color-border)] z-50">
  <nav class="container mx-auto px-4 py-3 flex items-center justify-between">
    <!-- Logo -->
    <a href="../index.html" class="flex items-center group">
      <img src="../images/Logos/main.png" 
         alt="My Urban Pass" 
         width="80" 
         height="10" 
         class="transform transition-all duration-300 hover:opacity-90 group-hover:scale-105 "
      />
    </a>

    <!-- Desktop Navigation -->
    <div class="hidden md:flex items-center space-x-6">
      <a href="../index.html" class="text-[var(--color-text)] hover:text-[var(--color-primary)] transition-colors duration-200">Home</a>
      <a href="../pages/destinations.html" class="text-[var(--color-text)] hover:text-[var(--color-primary)] transition-colors duration-200">Destinations</a>
      <a href="../pages/how-it-works.html" class="text-[var(--color-text)] hover:text-[var(--color-primary)] transition-colors duration-200">How It Works</a>
    </div>

    <!-- Desktop Auth + Theme + CTA -->
    <div class="hidden md:flex items-center space-x-4">
      <!-- Theme Toggle -->
      <button
        id="theme-toggle"
        class="p-2 rounded-full hover:bg-[var(--color-bg-alt)] text-[var(--color-text)] transition-colors duration-200"
        data-theme-toggle
        onclick="toggleTheme(); return false;"
      >
        <i class="fas fa-moon moon-icon"></i>
        <i class="fas fa-sun sun-icon hidden"></i>
      </button>

      <!-- Auth Actions -->
      <div id="nav-actions" class="flex items-center space-x-4">
        <!-- Will be populated by auth.js -->
        <div class="flex space-x-3">
          <a href="../pages/index.html" class="bg-gradient-to-r from-teal-400 to-cyan-400 text-white px-5 py-2 rounded-l-full hover:shadow-lg hover:shadow-cyan-200 dark:hover:shadow-cyan-900/30 transition-all duration-300 group">
            <span class="flex items-center">
              <i class="fas fa-ticket-alt mr-2 group-hover:rotate-12 transition-transform duration-300"></i>
              <span>City Pass</span>
            </span>
          </a>
        </div>
      </div>
    </div>

    <!-- Mobile CTA + Menu Button -->
    <div class="flex items-center space-x-2 md:hidden">
      <!-- Theme Toggle -->
      <button
        id="theme-toggle-mobile"
        class="p-2 rounded-full hover:bg-[var(--color-bg-alt)] text-[var(--color-text)] transition-colors duration-200"
        data-theme-toggle
        onclick="toggleTheme(); return false;"
      >
        <i class="fas fa-moon moon-icon"></i>
        <i class="fas fa-sun sun-icon hidden"></i>
      </button>


      <div class="flex">
        <a href="../pages/index.html" class="bg-gradient-to-r from-teal-400 to-cyan-400 text-white px-2 py-1.5 rounded-l-full text-sm transition-all duration-200 flex items-center">
          <i class="fas fa-ticket-alt"></i>
        </a>
      </div>

      <button
        id="mobile-menu-button"
        class="p-2 rounded-md text-[var(--color-text)] hover:bg-[var(--color-bg-alt)] transition-colors duration-200"
        onclick="openMobileMenu(); return false;"
      >
        <i class="fas fa-bars"></i>
      </button>
    </div>
  </nav>
</header>

<!-- Improved Mobile Menu -->
<div id="mobile-menu" class="fixed inset-0 bg-[var(--color-bg)] z-50 md:hidden" style="display: none;">
  <div class="flex flex-col h-full">
    <!-- Header with close button -->
    <div class="flex items-center justify-between px-6 py-4 border-b border-[var(--color-border)]">
      <a href="../index.html" class="text-2xl font-bold text-[var(--color-primary)]">My Urban Pass</a>
      <button
        id="close-menu-button"
        class="p-2 rounded-md text-[var(--color-text)] hover:bg-[var(--color-bg-alt)]"
        onclick="closeMobileMenu(); return false;"
      >
        <i class="fas fa-times"></i>
      </button>
    </div>

    <!-- Navigation Links -->
    <div class="flex-grow overflow-y-auto">
      <div class="py-2">
        <a href="../index.html" class="block px-6 py-3 text-[var(--color-text)] hover:bg-[var(--color-bg-alt)] hover:text-[var(--color-primary)] border-l-4 border-transparent hover:border-[var(--color-primary)] transition-all duration-200">Home</a>
        <a href="../pages/destinations.html" class="block px-6 py-3 text-[var(--color-text)] hover:bg-[var(--color-bg-alt)] hover:text-[var(--color-primary)] border-l-4 border-transparent hover:border-[var(--color-primary)] transition-all duration-200">Destinations</a>
        <a href="../pages/how-it-works.html" class="block px-6 py-3 text-[var(--color-text)] hover:bg-[var(--color-bg-alt)] hover:text-[var(--color-primary)] border-l-4 border-transparent hover:border-[var(--color-primary)] transition-all duration-200">How It Works</a>
      </div>
    </div>

    <!-- Auth Actions -->
    <div class="px-6 py-4 border-t border-[var(--color-border)]">
      <div id="mobile-nav-actions" class="space-y-3">
        <!-- Will be populated by auth.js -->
        <a href="../pages/index.html" class="block w-full text-center bg-gradient-to-r from-teal-400 to-cyan-400 text-white px-4 py-2 rounded-full transition-all duration-200 hover:shadow-md">
          <i class="fas fa-ticket-alt mr-2"></i> Explore City Pass
        </a>
      </div>
    </div>
  </div>
</div>

<style>
  /* Ensure mobile menu is hidden on page load */
  #mobile-menu {
    display: none !important;
  }

  /* Transition for mobile menu */
  #mobile-menu.visible {
    display: block !important;
    animation: fadeIn 0.3s ease-out;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  /* City Pass button effects */
  .from-amber-500 {
    --tw-gradient-from: #f59e0b;
    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(245, 158, 11, 0));
  }

  .to-orange-500 {
    /* replaced by to-cyan-400 */
  }

  .bg-gradient-to-r {
    background-image: linear-gradient(to right, var(--tw-gradient-stops));
  }

  /* Shadow effects for hover states */
  .hover\:shadow-lg:hover {
    --tw-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);
  }

  .hover\:shadow-orange-200:hover {
    --tw-shadow-color: rgba(254, 215, 170, 0.5);
    --tw-shadow: var(--tw-shadow-colored);
  }

  .dark .dark\:hover\:shadow-orange-900\/30:hover {
    --tw-shadow-color: rgba(124, 45, 18, 0.3);
    --tw-shadow: var(--tw-shadow-colored);
  }

  /* Transition effects */
  .transition-all {
    transition-property: all;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }

  .duration-200 {
    transition-duration: 200ms;
  }

  .duration-300 {
    transition-duration: 300ms;
  }

  /* Transform effects */
  .group:hover .group-hover\:rotate-12 {
    --tw-rotate: 12deg;
    transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));
  }

  .group:hover .group-hover\:scale-110 {
    --tw-scale-x: 1.1;
    --tw-scale-y: 1.1;
    transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));
  }
</style>

<!-- Header script for basic functionality -->
<script>
  // Basic theme initialization - this will be enhanced by main UI system
  document.addEventListener('DOMContentLoaded', function() {
    // Apply stored theme immediately to prevent flash
    const storedTheme = localStorage.getItem('theme') || 'light';
    const html = document.documentElement;

    if (storedTheme === 'dark') {
      html.classList.add('dark');
    } else {
      html.classList.remove('dark');
    }
  });
</script>